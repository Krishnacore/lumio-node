name: Copy images to dockerhub on release
on:
  push:
    branches:
      # lumio-node network-specific release branches
      - devnet
      - testnet
      - mainnet
      # preview branches
      - preview
      - preview-networking
      # lumio-indexer-grpc network-specific release branches
      - lumio-indexer-grpc-devnet
      - lumio-indexer-grpc-testnet
      - lumio-indexer-grpc-mainnet
    tags:
      - lumio-node-v*
      - lumio-indexer-grpc-v*

permissions:
  contents: read
  id-token: write #required for GCP Workload Identity federation

jobs:
  copy-images-to-docker-hub:
    uses: ./.github/workflows/copy-images-to-dockerhub.yaml
    with:
      image_tag_prefix: ${{ github.ref_name }}
    secrets: inherit
